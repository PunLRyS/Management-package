(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[729],{8919:function(e,t,a){Promise.resolve().then(a.bind(a,3148))},9376:function(e,t,a){"use strict";var r=a(5475);a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}})},4100:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var r=a(7437),l=a(7648),n=a(3145);function s(){return(0,r.jsx)("nav",{className:"fixed top-0 left-0 w-full bg-bgNav text-white p-4 z-20",children:(0,r.jsxs)("div",{className:"container mx-auto flex justify-between items-center",children:[(0,r.jsx)(l.default,{href:"/",className:"text-lg font-semibold px-2 ",children:(0,r.jsx)(n.default,{src:"/logo.PNG",alt:"Picture of the author",width:50,height:50})}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsx)("div",{className:"relative",children:(0,r.jsx)(l.default,{href:"/ex_package/Summary",children:(0,r.jsx)("button",{className:"hover:border-b-2 border-white px-2 py-2 font-semibold",children:"Xuất h\xe0ng"})})}),(0,r.jsx)("div",{className:"relative",children:(0,r.jsx)(l.default,{href:"/im_package/AddProduct",children:(0,r.jsx)("button",{className:"hover:border-b-2 border-white px-2 py-2 font-semibold",children:"Nhập h\xe0ng"})})}),(0,r.jsx)("div",{className:"relative",children:(0,r.jsx)(l.default,{href:"/Inventory",children:(0,r.jsx)("button",{className:"hover:border-b-2 border-white px-2 py-2 font-semibold",children:"Kho h\xe0ng"})})})]})]})})}},3148:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return h}});var r=a(7437),l=a(4100),n=a(2265),s=a(7648),i=a(9376),o=a(1269),c=a(3145),d=a(4720);function h(){let[e,t]=(0,n.useState)([]),[a,h]=(0,n.useState)([]),[u,m]=(0,n.useState)(!0),[b,x]=(0,n.useState)(null),[g,p]=(0,n.useState)(null),[j,y]=(0,n.useState)(""),[f,N]=(0,n.useState)(!1),[v,w]=(0,n.useState)(!1),[C,S]=(0,n.useState)(null),[k,T]=(0,n.useState)(!1),A={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:1}}},E={hidden:{opacity:0,x:-20},visible:e=>({opacity:1,x:0,transition:{delay:.1*e,duration:.8}})},D=(0,i.useRouter)(),[L,I]=(0,n.useState)({ten:"",ma:"",diaChi:"",soDienThoai:""});(0,n.useEffect)(()=>{let e=localStorage.getItem("productList");e&&t(JSON.parse(e))},[]);let O=a.filter(e=>{var t;return e.ten.toLowerCase().includes(j.toLowerCase())||(null===(t=e.number)||void 0===t?void 0:t.includes(j))||e.ma.includes(j)||e.diaChi.toLowerCase().includes(j.toLowerCase())||e.soDienThoai.includes(j)}),P=async()=>{let e=localStorage.getItem("productList");if(console.log("Dữ liệu lấy từ localStorage:",e),!e){console.log("Kh\xf4ng c\xf3 sản phẩm n\xe0o trong localStorage.");return}let t=JSON.parse(e);if(console.log("Dữ liệu đ\xe3 lấy từ localStorage:",t),t.length>0){if(!g){alert("Vui l\xf2ng chọn một nh\xe0 cung cấp trước khi gửi h\xf3a đơn!");return}let e=t.map(e=>({ma:e.ma,ten:e.ten,description:e.moTa||"",soLuong:Number(e.soLuong)||0,giaNhap:Number(e.giaNhap)||0}));console.log("Dữ liệu gửi đi:",e);try{for(let t of e){let e=await fetch("http://localhost:3000/hanghoa/create-hang-hoa",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let a=await e.json();console.log("Dữ liệu đ\xe3 được gửi th\xe0nh c\xf4ng:",a)}D.push("/im_package/BillProduct")}catch(e){console.error("Lỗi khi gửi dữ liệu v\xe0o cơ sở dữ liệu:",e)}}else console.log("Danh s\xe1ch sản phẩm trống.")},_=e=>{let t=g&&g.id===e?null:e;if(p(t?a.find(e=>e.id===t):null),t){let e=a.filter(e=>e.id===t);localStorage.setItem("selectedNCCData",JSON.stringify(e)),console.log("Nh\xe0 cung cấp đ\xe3 được lưu v\xe0o localStorage:",e)}else localStorage.removeItem("selectedNCCData"),console.log("Đ\xe3 x\xf3a nh\xe0 cung cấp khỏi localStorage.")},q=async e=>{e.preventDefault();let t={number:((a.length?Math.max(...a.map(e=>parseInt(e.number,10))):0)+1).toString(),...L};try{let e=await fetch("http://localhost:3000/nha-cung-cap/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw Error("Kh\xf4ng thể th\xeam đại l\xfd!");let a=await e.json();console.log("Đại l\xfd đ\xe3 được lưu:",a),h(e=>[...e,t]),N(!1),I({ten:"",ma:"",diaChi:"",soDienThoai:""}),window.location.reload()}catch(e){console.error("Lỗi khi th\xeam đại l\xfd:",e),alert("Đ\xe3 xảy ra lỗi khi th\xeam đại l\xfd!")}},R=e=>{e.target===e.currentTarget&&(N(!1),w(!1))},J=e=>{S(e),I({ten:e.ten,ma:e.ma,diaChi:e.diaChi,soDienThoai:e.soDienThoai}),w(!0)},M=async e=>{e.preventDefault();try{if(!(await fetch("http://localhost:3000/nha-cung-cap/".concat(C.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)})).ok)throw Error("Unable to edit dealer!");h(e=>e.map(e=>e.id===C.id?{...e,...L}:e)),w(!1),window.location.reload()}catch(e){console.error("Error editing dealer:",e),alert("An error occurred while editing the dealer!")}};(0,n.useEffect)(()=>{(async()=>{try{let e=await fetch("http://localhost:3000/nha-cung-cap");if(!e.ok)throw Error("Network response was not ok");let t=await e.json();h(t)}catch(e){x(e)}finally{m(!1)}})()},[]);let Q=async e=>{if(window.confirm("Are you sure you want to delete this dealer?"))try{if(!(await fetch("http://localhost:3000/nha-cung-cap/".concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete dealer");h(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Error deleting dealer:",e),alert("An error occurred while deleting the dealer")}},U=e.reduce((e,t)=>e+t.soLuong*t.giaNhap,0);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.Z,{}),(0,r.jsx)(c.default,{alt:"Mountains",src:d.Z,placeholder:"blur",quality:100,sizes:"100vw",style:{objectFit:"cover",position:"fixed"},className:"blur-sm absolute w-screen h-screen"}),(0,r.jsxs)(o.E.div,{className:"flex relative flex-col space-y-4 mt-8 pt-16",initial:"hidden",animate:"visible",variants:A,children:[(0,r.jsx)(o.E.h1,{className:"text-2xl font-bold mr-4 text-center",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:"Nh\xe0 cung cấp"}),(0,r.jsx)("div",{className:"w-full flex justify-center",children:(0,r.jsx)("div",{className:"w-3/5 border-t-2 border-blue-700"})}),(0,r.jsxs)("div",{className:"mx-auto flex gap-x-2",children:[(0,r.jsx)(o.E.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,r.jsx)(s.default,{href:"/im_package/AddProduct",children:(0,r.jsx)("button",{className:"style-button",children:"Quay lại trang th\xeam h\xe0ng cần nhập"})})}),(0,r.jsx)(o.E.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,r.jsx)(s.default,{href:"/im_package/BillProduct",children:(0,r.jsx)("button",{className:"style-button",children:"Xem h\xf3a đơn nhập h\xe0ng tại đ\xe2y"})})})]}),0===e.length?(0,r.jsx)(o.E.div,{className:"mt-8 text-center",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:(0,r.jsx)("p",{className:"text-gray-500",children:"Kh\xf4ng c\xf3 sản phẩm n\xe0o cần được nhập."})}):(0,r.jsxs)(o.E.div,{className:"mt-8 w-full overflow-x-auto",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[(0,r.jsx)("h2",{className:"text-xl font-bold ml-4 text-blue-500",children:"Danh s\xe1ch sản phẩm cần nhập"}),(0,r.jsxs)(o.E.table,{className:"min-w-full mt-4 border-collapse border border-gray-300",initial:"hidden",animate:"visible",variants:A,children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"bg-blue-200",children:[(0,r.jsx)("th",{className:"border border-gray-300 p-2",children:"Số thứ tự"}),(0,r.jsx)("th",{className:"border border-gray-300 p-2",children:"M\xe3 h\xe0ng"}),(0,r.jsx)("th",{className:"border border-gray-300 p-2",children:"T\xean h\xe0ng"}),(0,r.jsx)("th",{className:"border border-gray-300 p-2",children:"Số lượng"}),(0,r.jsx)("th",{className:"border border-gray-300 p-2",children:"Gi\xe1"}),(0,r.jsx)("th",{className:"border border-gray-300 p-2",children:"Tổng gi\xe1"})]})}),(0,r.jsx)("tbody",{children:e.map((e,t)=>{let a=e.soLuong*e.giaNhap;return(0,r.jsxs)(o.E.tr,{custom:t,initial:"hidden",animate:"visible",variants:E,className:"bg-gray-100",children:[(0,r.jsx)("td",{className:"border border-gray-300 p-2 text-center",children:t+1}),(0,r.jsx)("td",{className:"border border-gray-300 p-2 text-center",children:e.ma}),(0,r.jsx)("td",{className:"border border-gray-300 p-2 text-center",children:e.ten}),(0,r.jsx)("td",{className:"border border-gray-300 p-2 text-center",children:e.soLuong}),(0,r.jsx)("td",{className:"border border-gray-300 p-2 text-right",children:e.giaNhap}),(0,r.jsx)("td",{className:"border border-gray-300 p-2 text-right",children:a})]},t)})}),(0,r.jsx)("tfoot",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{colSpan:"5",className:"border border-gray-300 p-2 text-right font-bold",children:"Tổng số tiền cần thanh to\xe1n:"}),(0,r.jsx)("td",{className:"border border-gray-300 p-2 text-right",children:U})]})})]})]})]}),(0,r.jsx)("div",{className:"flex relative flex-col space-y-4",children:0===a.length?(0,r.jsx)("div",{className:"mt-8 text-center",children:(0,r.jsx)("p",{className:"text-gray-500",children:"Kh\xf4ng c\xf3 nh\xe0 cung cấp n\xe0o."})}):(0,r.jsxs)(o.E.div,{className:"mt-8 w-full overflow-x-auto",initial:{opacity:0},animate:{opacity:1},transition:{duration:1},children:[(0,r.jsx)("h2",{className:"text-xl font-bold ml-4 text-blue-500",children:"Danh s\xe1ch nh\xe0 cung cấp"}),(0,r.jsx)("div",{className:"mb-4 ml-4",children:(0,r.jsx)("input",{type:"text",placeholder:"T\xecm kiếm nh\xe0 cung cấp...",value:j,onChange:e=>y(e.target.value),className:"border border-gray-300 p-2 rounded w-full"})}),(0,r.jsxs)("div",{className:"mb-4 flex justify-center items-center space-x-4",children:[(0,r.jsx)("button",{onClick:()=>{T(!k)},className:"style-button w-[25%]",children:k?"Ẩn Danh S\xe1ch":"Hiện Danh S\xe1ch Nh\xe0 Cung Cấp"}),(0,r.jsx)("button",{onClick:()=>N(!0),className:"style-button w-[25%]",children:"Th\xeam nh\xe0 cung cấp"}),(0,r.jsx)("button",{onClick:P,className:"style-button w-[25%]",children:"Gửi h\xf3a đơn nhập h\xe0ng"})]}),f&&(0,r.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-10",onClick:R,children:(0,r.jsxs)("form",{onSubmit:q,className:"bg-white p-6 rounded shadow-md w-[90%] max-w-md",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Th\xeam nh\xe0 cung cấp mới"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block mb-1",children:"T\xean nh\xe0 cung cấp:"}),(0,r.jsx)("input",{type:"text",value:L.ten,onChange:e=>I({...L,ten:e.target.value}),className:"border border-gray-300 p-2 rounded w-full",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block mb-1",children:"M\xe3 nh\xe0 cung cấp:"}),(0,r.jsx)("input",{type:"text",value:L.ma,onChange:e=>I({...L,ma:e.target.value}),className:"border border-gray-300 p-2 rounded w-full",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block mb-1",children:"Địa chỉ:"}),(0,r.jsx)("input",{type:"text",value:L.diaChi,onChange:e=>I({...L,diaChi:e.target.value}),className:"border border-gray-300 p-2 rounded w-full",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block mb-1",children:"Số điện thoại:"}),(0,r.jsx)("input",{type:"text",value:L.soDienThoai,onChange:e=>I({...L,soDienThoai:e.target.value}),className:"border border-gray-300 p-2 rounded w-full",required:!0})]}),(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)("button",{type:"submit",className:"bg-blue-500 text-white font-bold py-2 px-4 rounded w-full",children:"Th\xeam nh\xe0 cung cấp"})})]})}),v&&(0,r.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-10",onClick:R,children:(0,r.jsxs)("form",{onSubmit:M,className:"bg-white p-6 rounded shadow-md w-[90%] max-w-md",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-4 text-center",children:"Sửa đại l\xfd"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block mb-1",children:"T\xean nh\xe0 cung cấp:"}),(0,r.jsx)("input",{type:"text",value:L.ten,onChange:e=>I({...L,ten:e.target.value}),className:"border border-gray-300 p-2 rounded w-full",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block mb-1",children:"M\xe3 nh\xe0 cung cấp:"}),(0,r.jsx)("input",{type:"text",value:L.ma,onChange:e=>I({...L,ma:e.target.value}),className:"border border-gray-300 p-2 rounded w-full",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block mb-1",children:"Địa chỉ:"}),(0,r.jsx)("input",{type:"text",value:L.diaChi,onChange:e=>I({...L,diaChi:e.target.value}),className:"border border-gray-300 p-2 rounded w-full",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block mb-1",children:"Số điện thoại:"}),(0,r.jsx)("input",{type:"text",value:L.soDienThoai,onChange:e=>I({...L,soDienThoai:e.target.value}),className:"border border-gray-300 p-2 rounded w-full",required:!0})]}),(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)("button",{type:"submit",className:"bg-blue-500 text-white font-bold py-2 px-4 rounded w-full",children:"Cập nhật nh\xe0 cung cấp"})})]})}),k&&(0,r.jsxs)(o.E.table,{className:"min-w-full mt-4 border-collapse border border-gray-300",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"bg-blue-200",children:[(0,r.jsx)("th",{className:"border border-gray-300 p-2",children:"Chọn"}),(0,r.jsx)("th",{className:"border border-gray-300 p-2",children:"Số thứ tự"}),(0,r.jsx)("th",{className:"border border-gray-300 p-2",children:"M\xe3 nh\xe0 cung cấp"}),(0,r.jsx)("th",{className:"border border-gray-300 p-2",children:"T\xean nh\xe0 cung cấp"}),(0,r.jsx)("th",{className:"border border-gray-300 p-2",children:"Địa chỉ"}),(0,r.jsx)("th",{className:"border border-gray-300 p-2",children:"Số điện thoại"}),(0,r.jsx)("th",{className:"border border-gray-200 p-2",children:"Chức năng"})]})}),(0,r.jsx)("tbody",{children:O.map((e,t)=>(0,r.jsxs)(o.E.tr,{className:"bg-gray-100",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[(0,r.jsx)("td",{className:"border border-gray-300 p-2 text-center",children:(0,r.jsx)("input",{type:"checkbox",checked:g&&g.id===e.id,onChange:()=>_(e.id)})}),(0,r.jsx)("td",{className:"border border-gray-300 p-2 text-center",children:t+1}),(0,r.jsx)("td",{className:"border border-gray-300 p-2 text-center",children:e.ma}),(0,r.jsx)("td",{className:"border border-gray-300 p-2 text-center",children:e.ten}),(0,r.jsx)("td",{className:"border border-gray-300 p-2 text-center",children:e.diaChi}),(0,r.jsx)("td",{className:"border border-gray-300 p-2 text-right",children:e.soDienThoai}),(0,r.jsx)("td",{className:"border border-gray-200 p-2",children:(0,r.jsxs)("div",{className:"flex justify-center space-x-2",children:[(0,r.jsx)("button",{onClick:()=>J(e),className:"style-button",children:"Sửa"}),(0,r.jsx)("button",{onClick:()=>Q(e.id),className:"style-button",children:"X\xf3a"})]})})]},t))})]})]})})]})}},4720:function(e,t){"use strict";t.Z={src:"/_next/static/media/Baixar-fundo-abstrato-hex\xe1gono_-conceito-poligonal-de-tecnologia-gratuitamente.c3777ead.png",height:368,width:736,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAIAAAA8r+mnAAAATUlEQVR42h3JSQ7AIAwDQCdE9P8P7aIeQIhgd5nrWOs9Ioq7mQGQtMg5M1JW/YPf2xTOqbjnGmY1isitFIj7yCsZLbl8HUkDAwlRcIcebEcveohQeW0AAAAASUVORK5CYII=",blurWidth:8,blurHeight:4}}},function(e){e.O(0,[891,971,117,744],function(){return e(e.s=8919)}),_N_E=e.O()}]);